services:
  postgres:
    image: postgres:15-alpine
    container_name: katrain-postgres
    restart: always
    environment:
      POSTGRES_USER: katrain_user
      # ⚠️ 生产环境请修改此密码 / In production, change this password!
      POSTGRES_PASSWORD: katrain_secure_password_CHANGE_ME
      POSTGRES_DB: katrain_db
    ports:
      - "5432:5432"
    volumes:
      # macOS Local Development: Store data in .postgres_data in the current directory
      - ./.postgres_data:/var/lib/postgresql/data
      - ./katrain/postgres/init.sql:/docker-entrypoint-initdb.d/init.sql

# 如果使用方式 2，可以删除下面的 volumes 块
# If using Option 2, you can remove the volumes block below
# volumes:
#   postgres_data: