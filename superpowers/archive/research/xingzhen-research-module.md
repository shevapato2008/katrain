# 星阵围棋"研究"模块功能描述

> 基于星阵围棋 Galaxy 平台截图及官方文档整理。

---

## 一级页面：研究准备（未开始分析）

一级页面是用户进入研究模块后的初始状态，用于加载棋谱、设置参数，尚未启动 AI 分析引擎。

### 整体布局

```
┌──────────┬──────────────────────────┬──────────────┐
│  左侧栏   │        棋盘区域           │   右侧面板    │
│  导航菜单  │   19路棋盘 + 坐标标注     │  对局信息     │
│          │                          │  规则设置     │
│          │                          │  配置选择     │
│          │                          │  开始研究按钮  │
│          ├──────────────────────────┤              │
│          │        底部工具栏          │              │
└──────────┴──────────────────────────┴──────────────┘
```

### 左侧导航栏

侧边栏提供平台各模块入口，"研究"处于选中高亮状态：

- 对弈
- **研究**（当前模块）
- 报告
- 直播
- 天元赛
- 特训
- 闯关
- 课程
- 棋谱库
- 数据
- 题城
- 星阵少儿

底部附有：帮助、设置、用户头像/账号信息。

### 棋盘区域

- 标准 19 路棋盘，带 A-T（去掉 I）列坐标和 1-19 行坐标
- 可直接在棋盘上落子摆棋
- 支持从本地上传 SGF 或从棋谱库加载棋谱
- 最近一手棋用红色圆点标记
- 底部显示当前手数（如"第262/262手"）

### 底部工具栏

棋盘下方的工具栏包含以下操作按钮（从左到右）：

- 打开棋谱（本地/棋谱库）
- 保存棋谱
- 悔棋/撤销
- 前进/后退导航
- 跳转到起始/末尾
- 进度条（可拖拽跳转到任意手数）
- 棋盘显示设置（坐标、手数标记等）

### 右侧面板

#### 1. 对局信息

- 黑方、白方棋手姓名和头像
- 棋手段位

#### 2. 规则设置

| 设置项 | 选项 |
|-------|------|
| 棋盘大小 | 19路棋盘（默认）/ 其他 |
| 规则 | 中国规则 / 日本规则 等 |
| 让子 | 让先 / 让N子 |
| 贴目 | 黑贴N子（如黑贴0子） |

#### 3. 配置选择（AI 算力）

用户选择分析引擎的算力配置：

| 配置 | 计算速度 | 计算量上限 | 分布式引擎 |
|------|---------|-----------|-----------|
| 专业版 5X | 5 倍速 | 500 万 | |
| 专业版 10X | 10 倍速 | 1000 万 | |
| 专业版 20X | 20 倍速 | 2000 万 | |
| 专业版 40X | 40 倍速 | 4000 万 | 支持 |
| 专业版 100X | 100 倍速 | 4000 万 | 支持 |
| 专业版 200X | 200 倍速 | 4000 万 | 支持 |

- 显示当前余额/可用时长
- 提供"星光卡"（包时套餐）入口
- 计费方式：按分钟计费，不足1分钟按1分钟收取

#### 4. 操作按钮

- **"开始研究"**：绿色大按钮，点击后启动 AI 引擎，进入二级页面

---

## 二级页面：研究进行中（AI 分析运行中）

点击"开始研究"后进入二级页面，AI 引擎开始实时分析当前局面，右侧面板从配置面板切换为分析数据面板。

### 整体布局

```
┌──────────┬──────────────────────────┬──────────────┐
│  左侧栏   │        棋盘区域           │   右侧面板    │
│  导航菜单  │   棋盘 + AI推荐点(绿点)   │  对局信息+胜率│
│          │   + 变化图预览            │  计算量      │
│          │                          │  选点列表     │
│          │                          │  全局计算     │
│          │                          │  走势图/配置  │
│          ├──────────────────────────┤              │
│          │        底部工具栏          │   停止按钮    │
└──────────┴──────────────────────────┴──────────────┘
```

### 棋盘区域变化

- **AI 推荐点**：以绿色圆点显示在棋盘上
  - 带圆环的绿点 = AI 第一选点（最佳推荐）
  - 小绿点 = 其他候选推荐点
- **变化图预览**：鼠标悬停绿点时，棋盘上实时预览该选点的后续变化图
- **变化图锁定**：右键点击绿点（或点击右侧列表选点）可锁定变化图，锁定后可滚轮前后翻看手顺
- 最近一手仍用红色圆点标记
- 底部右侧新增红色**停止按钮**（电源图标），用于结束研究、释放引擎

### 右侧面板（分析数据）

#### 1. 对局信息 + 胜率条

- 黑白双方棋手信息
- 胜率条（横向进度条）：黑色区域 vs 白色区域，直观展示当前局面胜率
- 显示具体胜率百分比（如"黑 66.1%"）

#### 2. 计算量显示

- 显示当前局面的实时计算量（如"计算量 56,100"）
- 数值持续增长，表示 AI 正在深入分析

#### 3. 选点列表（候选着手）

表格形式展示 AI 的推荐着手，按推荐度排序：

| 列名 | 说明 |
|------|------|
| 选点 | 坐标位置（如 H11、A9 等） |
| 推荐度 | AI 对该着手的推荐权重百分比 |
| 子差 | 该着手对应的目数差（正值黑优，负值白优） |
| 胜率 (%) | 该着手对应的胜率 |

- 鼠标悬停某行时，棋盘上预览该选点的变化图
- 点击某行可锁定该变化图

#### 4. 全局计算

- 显示全局计算量（如"全局计算量 19,000"）
- 全局计算开启后，后台分配部分算力进行全盘整体分析
- 自动生成以下数据：
  - 全盘胜率走势图
  - 妙手（brilliant moves）
  - 问题手（mistakes）
  - 发挥水准（performance rating）

#### 5. 功能开关按钮

| 按钮 | 功能 |
|------|------|
| 妙手 | 显示/查看全盘妙手列表，按玄妙程度分5级 |
| 问题手 | 显示/查看全盘问题手列表，附胜率变化箭头 |
| 显示先后目 | 切换领地显示 |
| 实战手 | 将棋谱实战的下一手加入候选点同步计算 |

#### 6. 走势图（全局计算开启时）

- 横轴：手数
- 纵轴：黑方视角的形势评估
- 两条曲线：
  - **蓝线**：胜率走势
  - **黄线**：子差（目数）走势
- 白色竖线标记当前浏览位置
- 可点击走势图跳转到对应手数

#### 7. 配置面板（可展开）

二级页面下方可展开配置区域，包含：

- 算力配置滑块（可在研究过程中切换配置）
- 妙手/问题手筛选（分阶段、分棋手查看）

---

## 交互操作汇总

### 鼠标操作

| 操作 | 效果 |
|------|------|
| 左键点击棋盘空位 | 落子 |
| 右键点击棋盘空白处 | 悔棋（回退一手） |
| 双击某一手 | 跳转到该手 |
| 鼠标悬停绿点 | 预览该选点变化图 |
| 右键点击绿点 | 锁定/解锁变化图 |
| 锁定变化图时滚轮 | 前后翻看变化图手顺 |
| 锁定变化图时单击某手 | 跳转到变化图中该手 |

### 键盘快捷键

| 快捷键 | 未锁定变化图时 | 锁定变化图时 |
|--------|--------------|-------------|
| 空格/回车 | 落子 AI 首选推荐 | — |
| 数字键 1-9 | 查看并锁定第1-9选点变化图 | 同左 |
| 上箭头 | — | 切换到前一个变化图 |
| 下箭头 | — | 切换到后一个变化图 |
| 左箭头 | 后退一手 | 变化图中后退一手 |
| 右箭头 | 前进一手 | 变化图中前进一手 |
| PgUp | 后退5手 | 变化图中后退5手 |
| PgDn | 前进5手 | 变化图中前进5手 |
| Home | 跳转到空棋盘 | 跳转到变化图第1手 |
| End | 跳转到最后一手 | 跳转到变化图最后一手 |
| Esc | — | 取消变化图锁定 |

---

## 页面状态转换

```
一级页面（研究准备）
    │
    │  点击"开始研究"
    ▼
二级页面（AI分析中）
    │
    │  点击"停止"按钮
    ▼
一级页面（研究准备）
```

- 从一级到二级：点击"开始研究"，分配 GPU 资源，启动引擎
- 从二级到一级：点击停止按钮，释放引擎资源，停止计费
- 研究过程中可随时落子、切换盘面，AI 自动重新分析新局面
- 关闭全局计算后已有的全局分析结果保留，重新开启后继续累积
