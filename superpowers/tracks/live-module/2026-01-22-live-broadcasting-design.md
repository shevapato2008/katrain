# KaTrain Galaxy ç›´æ’­åŠŸèƒ½è®¾è®¡æ–‡æ¡£

**æ—¥æœŸ**: 2026-01-22
**çŠ¶æ€**: å·²ç¡®è®¤ï¼Œå¾…å®ç°

---

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 åŠŸèƒ½ç›®æ ‡

ä¸º KaTrain Galaxy Web UI æ·»åŠ ç›´æ’­åŠŸèƒ½æ¨¡å—ï¼Œæ”¯æŒï¼š
- å®æ—¶è§‚çœ‹èŒä¸šå›´æ£‹æ¯”èµ›ï¼ˆæ•°æ®æºï¼šXingZhen æ˜Ÿé˜µå›´æ£‹ï¼‰
- å›é¡¾è¿‘æœŸé‡è¦æ¯”èµ›æ£‹è°±ï¼ˆæ•°æ®æºï¼šä¸­å›½å›´æ£‹åä¼šï¼‰
- æœ¬åœ° KataGo å¼•æ“å®æ—¶åˆ†æï¼Œæ ‡æ³¨å¦™æ‰‹/é—®é¢˜æ‰‹
- æŸ¥çœ‹å³å°†è¿›è¡Œçš„èµ›äº‹é¢„å‘Š

### 1.2 æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| åŒæ•°æ®æº | XingZhenï¼ˆå®æ—¶ç›´æ’­ï¼‰+ weiqi.org.cnï¼ˆè¿‘æœŸæ£‹è°±ï¼‰ |
| æœ¬åœ°åˆ†æ | ä½¿ç”¨ KaTrain KataGo å¼•æ“ï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹åˆ†æ |
| PV æ¨æ¼” | æ‚¬åœæ˜¾ç¤º AI é¢„æµ‹å˜åŒ–å›¾ï¼ˆå¯é…ç½®æ­¥æ•°/é€Ÿåº¦ï¼‰ |
| å¦™æ‰‹/é—®é¢˜æ‰‹ | åŸºäºç›®æ•°å˜åŒ–è‡ªåŠ¨æ ‡æ³¨ï¼Œæ‚¬åœæ˜¾ç¤ºåŸå›  |
| èµ›äº‹é¢„å‘Š | å®šæœŸçˆ¬å–æ•´åˆå¤šæ¥æºèµ›äº‹ä¿¡æ¯ |
| è¯„è®ºç³»ç»Ÿ | ç›´æ’­æ—¶æ˜¾ç¤ºè¯„è®ºåŒºï¼Œç”¨æˆ·å¯ç™»å½•å‘è¨€ |

### 1.3 ä¸åŒ…å«ï¼ˆMVP èŒƒå›´å¤–ï¼‰

- æ£‹å‹èµ›äº‹/ä¸šä½™æ¯”èµ›
- è¯„è®ºå®¡æ ¸åŠŸèƒ½ï¼ˆåç»­å®ç°ï¼‰
- æ£‹æ‰‹å¤´åƒè·å–
- å‘æŒ¥æ°´å‡†æŒ‡æ ‡
- åœä¸€æ‰‹ã€ç ”ç©¶ã€åˆ†äº«åŠŸèƒ½

---

## 2. æ•°æ®æº API

### 2.1 XingZhen æ˜Ÿé˜µå›´æ£‹

**åŸºç¡€ URL**: `https://api.19x19.com/api/engine/golives`

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `GET /all` | æ‰€æœ‰æ­£åœ¨ç›´æ’­çš„æ¯”èµ› |
| `GET /count` | ç›´æ’­æ¯”èµ›æ•°é‡ |
| `GET /history?page=0&size=10&live_type=TOP_LIVE` | å†å²ç›´æ’­åˆ—è¡¨ |
| `GET /situation/{live_id}?no_cache=1` | å½“å‰å±€é¢ + ç€æ³• |
| `GET /winrates/{live_id}?begin_move_num=X` | èƒœç‡å†å² |
| `GET /base/{live_id}?begin_move_num=X&end_move_num=Y` | è¯¦ç»†åˆ†æ |

**å…³é”®æ•°æ®å­—æ®µ**:
- `liveId`: æ¯”èµ›å”¯ä¸€ID
- `liveStatus`: 0=ç›´æ’­ä¸­, 40=å·²ç»“æŸ
- `pb/pw`: é»‘æ–¹/ç™½æ–¹æ£‹æ‰‹å
- `moveNum`: å½“å‰æ‰‹æ•°
- `winrate`: é»‘æ–¹èƒœç‡ (0-1)

### 2.2 ä¸­å›½å›´æ£‹åä¼š

> **âš ï¸ å·²ç¦ç”¨ (Phase 1 - 2026-01-25)**
>
> WeiqiOrg API è¿”å›çš„ `gameKifuSgf` å­—æ®µæ•°æ®å·²åŠ å¯†/ç¼–ç ï¼Œæ— æ³•ç›´æ¥è§£æä¸ºæ ‡å‡† SGF æ ¼å¼ã€‚
> Base64 è§£ç åä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œéœ€è¦é€†å‘å·¥ç¨‹è·å–è§£å¯†å¯†é’¥ã€‚
> **è®¡åˆ’åœ¨ Phase 2 å®ç°è§£å¯†åŠŸèƒ½åé‡æ–°å¯ç”¨æ­¤æ•°æ®æºã€‚**

**åŸºç¡€ URL**: `https://wqapi.cwql.org.cn`

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/playerInfo/battle/list` | POST | è·å–å¯¹å±€åˆ—è¡¨ |
| `/playerInfo/battle/{battleNo}` | GET | è·å–å¯¹å±€è¯¦æƒ… + SGF |

**è¯·æ±‚ç¤ºä¾‹**:
```json
POST /playerInfo/battle/list
{
  "pageNum": 1,
  "pageSize": 20,
  "gameKifu": 1
}
```

**å“åº”å…³é”®å­—æ®µ**:
- `battleNo`: å¯¹å±€ID
- `gameKifuSgf`: å®Œæ•´ SGF æ•°æ®
- `gameFullName`: èµ›äº‹å…¨ç§°
- `battleResultComment`: æ¯”èµ›ç»“æœ

---

## 3. é¡µé¢ç»“æ„

### 3.1 ä¸€çº§é¡µé¢ï¼šç›´æ’­é¦–é¡µ (`/galaxy/live`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sidebar   â”‚            ä¸»å†…å®¹åŒº              â”‚      å³è¾¹æ        â”‚
â”‚            â”‚                                 â”‚                  â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  [é¡¶å°–å¤§èµ›][é¢„å‘Š]  â”‚
â”‚            â”‚  â”‚                           â”‚  â”‚                  â”‚
â”‚            â”‚  â”‚         æ£‹ ç›˜              â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚            â”‚  â”‚   (æœ€é‡è¦çš„å®æ—¶/æœ€æ–°æ¯”èµ›)    â”‚  â”‚  â”‚ æ­£åœ¨ç›´æ’­    â”‚  â”‚
â”‚            â”‚  â”‚                           â”‚  â”‚  â”‚ äº•å±± vs ä½™  â”‚  â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ 91.9% 130æ‰‹ â”‚  â”‚
â”‚            â”‚                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚            â”‚  â”‚  â® âª â¯ â© â­  313/313æ‰‹   â”‚  â”‚  â”‚ å†å²ç›´æ’­    â”‚  â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ ä¸Šé‡ vs ... â”‚  â”‚
â”‚            â”‚                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚        [ è¿›å…¥ç›´æ’­ ] æŒ‰é’®         â”‚       ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å³è¾¹æ  TAB**:
- **é¡¶å°–å¤§èµ›**ï¼ˆé»˜è®¤ï¼‰ï¼šå®æ—¶ + è¿‘æœŸæ¯”èµ›å¡ç‰‡åˆ—è¡¨ï¼ŒæŒ‰æ—¶é—´å€’åº
- **èµ›äº‹é¢„å‘Š**ï¼šå³å°†è¿›è¡Œçš„é‡è¦æ¯”èµ›åˆ—è¡¨

**ä¸»å†…å®¹åŒºé€»è¾‘**:
- æœ‰å®æ—¶ç›´æ’­ â†’ æ˜¾ç¤ºæœ€é‡è¦çš„å®æ—¶æ¯”èµ›
- æ— å®æ—¶ç›´æ’­ â†’ æ˜¾ç¤ºæœ€æ–°ä¸€åœºå·²ç»“æŸæ¯”èµ›

### 3.2 äºŒçº§é¡µé¢ï¼šå¯¹å±€è¯¦æƒ…é¡µ (`/galaxy/live/{match_id}`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sidebar   â”‚      ä¸»å†…å®¹åŒº       â”‚           å³è¾¹æ  (åŠ å®½)         â”‚
â”‚            â”‚                    â”‚                                â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”‚ ç¬¬29æœŸæ—¥æœ¬å¥³æµæ£‹åœ£æˆ˜...     â”‚â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”‚ ä¸Šé‡æ¢¨çº± â—â”â”â”â”â” 96.2% ä¸Šé‡çˆ±â”‚â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚            â”‚  â”‚     æ£‹ ç›˜     â”‚  â”‚  â”‚ æ¨èç€æ³•         [â–²][â–¼]   â”‚â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”‚ H3  29%  4.7ç›®  96.2%     â”‚â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”‚ S7  17%  5.7ç›®  95.8%     â”‚â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”‚ G9  16%  4.4ç›®  96.6%     â”‚â”‚
â”‚            â”‚  â”‚              â”‚  â”‚  â”‚ P18 15%  4.5ç›®  96.2%     â”‚â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚            â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚            â”‚                    â”‚  â”‚[èµ°åŠ¿å›¾][å¦™æ‰‹][é—®é¢˜æ‰‹]        â”‚â”‚
â”‚            â”‚                    â”‚  â”‚   ğŸ“ˆ èƒœç‡/ç›®æ•°æ›²çº¿          â”‚â”‚
â”‚            â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚            â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚            â”‚                    â”‚  â”‚ è¯•ä¸‹  é¢†åœ°  æ‰‹æ•°            â”‚â”‚
â”‚            â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚            â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚            â”‚                    â”‚  â”‚ ğŸ’¬ è¯„è®ºåŒº (ä»…ç›´æ’­æ—¶æ˜¾ç¤º)     â”‚â”‚
â”‚            â”‚                    â”‚  â”‚  user1: è¿™æ‰‹æ£‹å‰å®³         â”‚â”‚
â”‚            â”‚                    â”‚  â”‚  user2: é»‘æ£‹å½¢åŠ¿ä¸å¦™       â”‚â”‚
â”‚            â”‚                    â”‚  â”‚  [è¾“å…¥è¯„è®º...]    [å‘é€]   â”‚â”‚
â”‚            â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚            â”‚                    â”‚  â® âª â¯ â© â­  297/313æ‰‹       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å³è¾¹æ æ¨¡å—ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰**:
1. **å¯¹å±€ä¿¡æ¯**ï¼šèµ›äº‹åç§°ã€æ—¥æœŸã€æ£‹æ‰‹ä¿¡æ¯ã€èƒœç‡æ¡
2. **AI æ¨èç€æ³•**ï¼šæœ€å¤šæ˜¾ç¤º 4 æ‰‹ï¼Œå¸¦æ»‘åŠ¨æ¡å¯æŸ¥çœ‹æ›´å¤š
3. **èµ°åŠ¿å›¾ TAB**ï¼šèµ°åŠ¿å›¾ / å¦™æ‰‹åˆ—è¡¨ / é—®é¢˜æ‰‹åˆ—è¡¨
4. **åŠŸèƒ½æŒ‰é’®**ï¼šè¯•ä¸‹ã€é¢†åœ°ã€æ‰‹æ•°
5. **è¯„è®ºåŒº**ï¼šä»…ç›´æ’­æ¯”èµ›æ˜¾ç¤ºï¼Œå›ºå®šåŒºåŸŸï¼Œå¯å‘è¨€
6. **æ’­æ”¾æ§åˆ¶æ **ï¼šè¿›åº¦æ§åˆ¶ + æ‰‹æ•°æ˜¾ç¤º

---

## 4. åç«¯æ¶æ„

### 4.1 æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           KaTrain åç«¯                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ LivePoller  â”‚    â”‚ LiveCache   â”‚    â”‚     KataGo Engine       â”‚ â”‚
â”‚  â”‚ (å®šæ—¶ä»»åŠ¡)   â”‚â”€â”€â”€â–¶â”‚ (Redis/å†…å­˜) â”‚â”€â”€â”€â–¶â”‚     (æœ¬åœ°åˆ†æ)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                  â”‚                       â”‚               â”‚
â”‚         â–¼                  â–¼                       â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ XingZhen    â”‚    â”‚ weiqi.org   â”‚    â”‚   åˆ†æç»“æœå­˜å‚¨           â”‚ â”‚
â”‚  â”‚ API Client  â”‚    â”‚ API Client  â”‚    â”‚   (SGF + åˆ†ææ•°æ®)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚                       â”‚
         â–¼                   â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ api.19x19.com   â”‚  â”‚ wqapi.cwql.org  â”‚  â”‚    PostgreSQL DB        â”‚
â”‚ (ç€æ³•/èµ›äº‹ä¿¡æ¯)  â”‚  â”‚ (æ£‹è°±/SGF)      â”‚  â”‚ (ç”¨æˆ·/è¯„è®º/å†å²åˆ†æ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 åç«¯æ¨¡å—ç»“æ„

```
katrain/web/
â”œâ”€â”€ live/                       # æ–°å¢ï¼šç›´æ’­æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ poller.py              # å®šæ—¶è½®è¯¢ä»»åŠ¡
â”‚   â”œâ”€â”€ cache.py               # ç›´æ’­æ•°æ®ç¼“å­˜
â”‚   â”œâ”€â”€ clients/
â”‚   â”‚   â”œâ”€â”€ xingzhen.py        # XingZhen API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ weiqi_org.py       # weiqi.org.cn API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ analyzer.py            # KataGo åˆ†æè°ƒåº¦
â”‚   â””â”€â”€ models.py              # ç›´æ’­ç›¸å…³æ•°æ®æ¨¡å‹
â”œâ”€â”€ api/v1/endpoints/
â”‚   â””â”€â”€ live.py                # æ–°å¢ï¼šç›´æ’­ API ç«¯ç‚¹
```

### 4.3 API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/live/matches` | GET | è·å–æ¯”èµ›åˆ—è¡¨ï¼ˆç›´æ’­+è¿‘æœŸï¼‰ |
| `/api/v1/live/matches/{id}` | GET | è·å–æ¯”èµ›è¯¦æƒ…ï¼ˆå«ç€æ³•ã€åˆ†æï¼‰ |
| `/api/v1/live/matches/{id}/analysis` | GET | è·å–æŒ‡å®šæ‰‹æ•°çš„åˆ†ææ•°æ® |
| `/api/v1/live/upcoming` | GET | è·å–èµ›äº‹é¢„å‘Šåˆ—è¡¨ |
| `/api/v1/live/matches/{id}/comments` | GET | è·å–è¯„è®ºåˆ—è¡¨ |
| `/api/v1/live/matches/{id}/comments` | POST | å‘è¡¨è¯„è®ºï¼ˆéœ€ç™»å½•ï¼‰ |

### 4.4 æ•°æ®æ¨¡å‹

```python
# æ¯”èµ›ä¿¡æ¯
class LiveMatch:
    id: str                    # å†…éƒ¨ID
    source: str                # "xingzhen" | "weiqi_org"
    source_id: str             # åŸå§‹æ•°æ®æºID
    tournament: str            # èµ›äº‹åç§°
    date: datetime             # æ¯”èµ›æ—¥æœŸ
    player_black: str          # é»‘æ–¹æ£‹æ‰‹
    player_white: str          # ç™½æ–¹æ£‹æ‰‹
    status: str                # "live" | "finished"
    result: str | None         # æ¯”èµ›ç»“æœ
    move_count: int            # å½“å‰æ‰‹æ•°
    current_winrate: float     # å½“å‰é»‘æ–¹èƒœç‡
    sgf: str | None            # SGF æ•°æ®

# åˆ†ææ•°æ®
class MoveAnalysis:
    match_id: str
    move_number: int
    winrate: float             # é»‘æ–¹èƒœç‡
    score_lead: float          # é»‘æ–¹é¢†å…ˆç›®æ•°
    top_moves: list            # AI æ¨èç€æ³•
    is_brilliant: bool         # å¦™æ‰‹æ ‡è®°
    is_mistake: bool           # é—®é¢˜æ‰‹æ ‡è®°
    is_questionable: bool      # ç–‘é—®æ‰‹æ ‡è®°
    delta_score: float         # ç›®æ•°å˜åŒ–
    delta_winrate: float       # èƒœç‡å˜åŒ–
```

---

## 5. å‰ç«¯ç»„ä»¶

### 5.1 æ–‡ä»¶ç»“æ„

```
katrain/web/ui/src/galaxy/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ live/
â”‚       â”œâ”€â”€ LivePage.tsx           # ä¸€çº§é¡µé¢ï¼šç›´æ’­é¦–é¡µ
â”‚       â””â”€â”€ LiveMatchPage.tsx      # äºŒçº§é¡µé¢ï¼šå¯¹å±€è¯¦æƒ…
â”œâ”€â”€ components/
â”‚   â””â”€â”€ live/
â”‚       â”œâ”€â”€ MatchCard.tsx          # æ¯”èµ›å¡ç‰‡ï¼ˆåˆ—è¡¨é¡¹ï¼‰
â”‚       â”œâ”€â”€ MatchList.tsx          # æ¯”èµ›åˆ—è¡¨
â”‚       â”œâ”€â”€ UpcomingList.tsx       # èµ›äº‹é¢„å‘Šåˆ—è¡¨
â”‚       â”œâ”€â”€ MatchInfo.tsx          # å¯¹å±€ä¿¡æ¯é¢æ¿
â”‚       â”œâ”€â”€ AiAnalysis.tsx         # AI æ¨èç€æ³•é¢æ¿
â”‚       â”œâ”€â”€ TrendChart.tsx         # èµ°åŠ¿å›¾ï¼ˆå¤ç”¨/æ”¹é€ ç°æœ‰ï¼‰
â”‚       â”œâ”€â”€ BrilliantMoves.tsx     # å¦™æ‰‹åˆ—è¡¨
â”‚       â”œâ”€â”€ MistakeMoves.tsx       # é—®é¢˜æ‰‹åˆ—è¡¨
â”‚       â”œâ”€â”€ LiveControls.tsx       # åŠŸèƒ½æŒ‰é’®ç»„
â”‚       â”œâ”€â”€ CommentSection.tsx     # è¯„è®ºåŒº
â”‚       â”œâ”€â”€ PlaybackBar.tsx        # æ’­æ”¾æ§åˆ¶æ 
â”‚       â””â”€â”€ PvOverlay.tsx          # PV æ¨æ¼”è¦†ç›–å±‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ live/
â”‚       â”œâ”€â”€ useLiveMatches.ts      # æ¯”èµ›åˆ—è¡¨æ•°æ® hook
â”‚       â”œâ”€â”€ useLiveMatch.ts        # å•åœºæ¯”èµ›æ•°æ® hook
â”‚       â”œâ”€â”€ useAnalysis.ts         # åˆ†ææ•°æ® hook
â”‚       â””â”€â”€ useComments.ts         # è¯„è®ºæ•°æ® hook
â””â”€â”€ context/
    â””â”€â”€ LiveContext.tsx            # ç›´æ’­çŠ¶æ€ç®¡ç†
```

### 5.2 çŠ¶æ€ç®¡ç†

```typescript
interface LiveState {
  // æ¯”èµ›åˆ—è¡¨
  matches: LiveMatch[];
  upcomingMatches: UpcomingMatch[];

  // å½“å‰æ¯”èµ›
  currentMatch: LiveMatch | null;
  currentMoveNumber: number;
  isLive: boolean;

  // åˆ†ææ•°æ®
  analysisData: Map<number, MoveAnalysis>;

  // PV æ˜¾ç¤º
  hoveredMove: string | null;
  pvMoves: string[];
  pvAnimationIndex: number;

  // è½®è¯¢æ§åˆ¶
  isPolling: boolean;
}
```

---

## 6. é…ç½®ç»“æ„

```json
{
  "live": {
    "sources": {
      "xingzhen": {
        "enabled": true,
        "api_base": "https://api.19x19.com/api/engine/golives",
        "endpoints": {
          "live_list": "/all",
          "history": "/history",
          "situation": "/situation/{live_id}",
          "winrates": "/winrates/{live_id}"
        }
      },
      "weiqi_org": {
        "enabled": true,
        "api_base": "https://wqapi.cwql.org.cn",
        "endpoints": {
          "battle_list": "/playerInfo/battle/list",
          "battle_detail": "/playerInfo/battle/{battle_no}"
        },
        "web_url": "https://www.weiqi.org.cn/competition/battle"
      }
    },
    "polling": {
      "list_interval": 60,
      "moves_interval": 3,
      "analysis_interval": 5
    },
    "analysis": {
      "max_visits": 500,
      "use_local_katago": true
    },
    "display": {
      "pv_moves": 10,
      "pv_anim_time": 0.3,
      "brilliant_threshold": 2.0,
      "mistake_threshold": -3.0,
      "questionable_threshold": -1.5
    }
  }
}
```

---

## 7. å®ç°é˜¶æ®µ

| é˜¶æ®µ | å†…å®¹ | ä¾èµ– |
|------|------|------|
| **Phase 1** | åç«¯ API å®¢æˆ·ç«¯ï¼ˆXingZhen + weiqi.orgï¼‰ | æ—  |
| **Phase 2** | åç«¯è½®è¯¢ + ç¼“å­˜ + API ç«¯ç‚¹ | Phase 1 |
| **Phase 3** | å‰ç«¯ä¸€çº§é¡µé¢ï¼ˆç›´æ’­é¦–é¡µï¼‰ | Phase 2 |
| **Phase 4** | å‰ç«¯äºŒçº§é¡µé¢ï¼ˆå¯¹å±€è¯¦æƒ…ï¼‰ | Phase 3 |
| **Phase 5** | KataGo æœ¬åœ°åˆ†æé›†æˆ | Phase 2 |
| **Phase 6** | PV æ¨æ¼”æ˜¾ç¤º | Phase 4, 5 |
| **Phase 7** | è¯„è®ºç³»ç»Ÿ | Phase 4 |
| **Phase 8** | èµ›äº‹é¢„å‘Šçˆ¬å– | Phase 2 |

---

## 8. åç»­å¾…åŠï¼ˆMVP ä¹‹åï¼‰

- [ ] è¯„è®ºå®¡æ ¸åŠŸèƒ½
- [ ] æ£‹æ‰‹å¤´åƒæ‰¹é‡è·å–
- [ ] æ£‹æ‰‹åå­—ä¸­è‹±ç¿»è¯‘
- [ ] åœä¸€æ‰‹ã€ç ”ç©¶ã€åˆ†äº«åŠŸèƒ½
- [ ] æ£‹å‹èµ›äº‹æ”¯æŒ
- [ ] æ›´å¤šæ•°æ®æºï¼ˆæ—¥æœ¬æ£‹é™¢ã€éŸ©å›½æ£‹é™¢ï¼‰

---

## 9. PV æ¨æ¼”æ˜¾ç¤ºå‚è€ƒ

å‚è€ƒ KaTrain æ¡Œé¢ç‰ˆå®ç° (`katrain/gui/badukpan.py`):

- **æ˜¾ç¤ºæ–¹å¼**: `draw_pv()` æ–¹æ³•ï¼ŒåŠé€æ˜æ£‹å­ + åºå·æ ‡ç­¾
- **è§¦å‘æ–¹å¼**: é¼ æ ‡æ‚¬åœåœ¨æ¨èæ‹›æ³•ä¸Š
- **åŠ¨ç”»é…ç½®**: `general/anim_pv_time` (é»˜è®¤ 0.5 ç§’)
- **æ•°æ®æ¥æº**: KataGo `analysis.json["moveInfos"][0]["pv"]`

---

## 10. å¦™æ‰‹/é—®é¢˜æ‰‹æ ‡æ³¨

| æ ‡æ³¨ç±»å‹ | é˜ˆå€¼ | è¯´æ˜ |
|----------|------|------|
| é—®é¢˜æ‰‹ ğŸ”´ | delta < -3.0 ç›® | æ˜æ˜¾å¤±è¯¯ |
| ç–‘é—®æ‰‹ ğŸŸ¡ | delta < -1.5 ç›® | å°å¤±è¯¯ |
| å¦™æ‰‹ ğŸŸ¢ | delta > +2.0 ç›® | æ‰­è½¬å±€åŠ¿çš„å¥½æ£‹ |

**æ‚¬åœæ˜¾ç¤ºåŸå› **: ç›®æ•°å˜åŒ–ï¼ˆå¦‚ "-5.2ç›®"ï¼‰ã€èƒœç‡å˜åŒ–ï¼ˆå¦‚ "-12.3%"ï¼‰

---

# ä¸“å®¶è¯„å®¡ (2026-01-22)

ä½œä¸ºä¸€åå…¼å…·å›´æ£‹èƒŒæ™¯å’Œè®¡ç®—æœºä¸“ä¸šçš„å¼€å‘è€…ï¼Œæˆ‘å¯¹è¿™ä»½è®¾è®¡æ–‡æ¡£çš„è¯„ä»·æ˜¯ï¼š**æ¶æ„æ¸…æ™°ã€åŠŸèƒ½åˆ‡ä¸­ç—›ç‚¹ï¼Œä½†å­˜åœ¨å‡ ä¸ªå…³é”®çš„â€œéšå½¢åœ°é›·â€ï¼ˆé£é™©ç‚¹ï¼‰éœ€è¦æˆ‘ä»¬åœ¨å®ç°æ—¶æ ¼å¤–æ³¨æ„ã€‚**

### ä¼˜ç‚¹
1.  **æ¶æ„æ¸…æ™°**: æ˜ç¡®äº† "LivePoller" (è½®è¯¢) å’Œ "LiveCache" (ç¼“å­˜) çš„è®¾è®¡ï¼Œè¿™å¯¹äºä¿è¯ UI æµç•…æ€§å’Œé¿å…é¢‘ç¹è¯·æ±‚ API è‡³å…³é‡è¦ã€‚
2.  **API è°ƒç ”æ·±å…¥**: æä¾›äº† 19x19 å’Œ cwql çš„å…·ä½“ API ç«¯ç‚¹ï¼Œå¤§å¤§å‡å°‘äº†å¼€å‘å‰æœŸçš„è°ƒç ”æˆæœ¬ã€‚
3.  **åŠŸèƒ½å®Œæ•´**: æ¶µç›–äº†ç›´æ’­ã€å†å²å›é¡¾ã€æœ¬åœ° AI åˆ†æã€PV æ¨æ¼”ç­‰å›´æ£‹ç”¨æˆ·æœ€å…³å¿ƒçš„æ ¸å¿ƒåŠŸèƒ½ã€‚

### ç¼ºé™·ä¸é£é™©åˆ†æ

#### 1. æŠ€æœ¯é£é™©ï¼šAPI çš„éå®˜æ–¹æ€§è´¨ (æœ€é«˜é£é™©)
*   **é—®é¢˜**: æˆ‘ä»¬ä¾èµ–çš„ `api.19x19.com` å’Œ `cwql.org.cn` å¹¶éå®˜æ–¹å¼€æ”¾å¹³å°ï¼Œè€Œæ˜¯é€šè¿‡é€†å‘å·¥ç¨‹è·å–çš„ã€‚
*   **é£é™©**:
    *   **åçˆ¬è™«/é™æµ**: å¦‚æœæˆ‘ä»¬çš„å®¢æˆ·ç«¯è½®è¯¢é¢‘ç‡è¿‡é«˜ï¼ˆæ¯”å¦‚å‡ åƒä¸ªç”¨æˆ·åŒæ—¶åœ¨çº¿ï¼‰ï¼Œå¯èƒ½ä¼šè§¦å‘å¯¹æ–¹çš„ WAF é˜²ç«å¢™ï¼Œå¯¼è‡´ IP è¢«å°ç¦ã€‚
    *   **æ¥å£å˜åŠ¨**: å¯¹æ–¹ä¸€æ—¦æ›´æ–°å‰ç«¯ä»£ç æˆ–ä¿®æ”¹ JSON ç»“æ„ï¼Œæˆ‘ä»¬çš„â€œç›´æ’­â€åŠŸèƒ½å°±ä¼šç«‹å³ç˜«ç—ªï¼Œå¿…é¡»å‘å¸ƒæ–°ç‰ˆæœ¬ä¿®å¤ã€‚
*   **å»ºè®®**: åœ¨ `LivePoller` ä¸­å¿…é¡»å®ç°**æŒ‡æ•°é€€é¿ (Exponential Backoff)** ç­–ç•¥ã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œä¸è¦æ­»å¾ªç¯é‡è¯•ï¼Œè€Œæ˜¯é™ä½é¢‘ç‡ã€‚åŒæ—¶ï¼Œç¼“å­˜ç­–ç•¥è¦å°½å¯èƒ½æ¿€è¿›ï¼Œå‡å°‘å¯¹æºç«™çš„è¯·æ±‚ã€‚

#### 2. äº§å“é€»è¾‘ï¼šæœ¬åœ°åˆ†æçš„â€œç®—åŠ›é™·é˜±â€
*   **é—®é¢˜**: è§„åˆ’ä¸­æåˆ°åˆ©ç”¨æœ¬åœ° KataGo å®æ—¶åˆ†æå¹¶æ ‡æ³¨â€œå¦™æ‰‹/é—®é¢˜æ‰‹â€ã€‚
*   **é£é™©**:
    *   **æ€§èƒ½æ»å**: èŒä¸šæ¯”èµ›å¿«æ£‹é˜¶æ®µï¼Œä¸€æ‰‹æ£‹å¯èƒ½åªæœ‰ 30 ç§’ã€‚å¦‚æœç”¨æˆ·çš„æ˜¾å¡è¾ƒå¼±ï¼ˆå¦‚é›†æˆæ˜¾å¡ï¼‰ï¼ŒKataGo å¯èƒ½è¿˜æ²¡ç®—å‡ºä¸Šä¸€æ‰‹çš„èƒœç‡ï¼Œä¸‹ä¸€æ‰‹æ£‹å·²ç»æ¥äº†ã€‚è¿™ä¼šå¯¼è‡´â€œå¦™æ‰‹â€æ ‡æ³¨å‡ºç°ä¸¥é‡çš„å»¶è¿Ÿæˆ–æ¼æ ‡ã€‚
    *   **å‡†ç¡®æ€§**: å¿«é€Ÿåˆ†æï¼ˆä½ Visitsï¼‰ä¸‹çš„èƒœç‡æ³¢åŠ¨å¾ˆå¤§ã€‚AI å¯èƒ½ä¼šåœ¨ä½ç®—åŠ›ä¸‹æŠŠä¸€æ­¥æ­£å¸¸æ£‹è¯¯åˆ¤ä¸ºâ€œé—®é¢˜æ‰‹â€ï¼ˆèƒœç‡è·³æ°´ï¼‰ï¼Œè¿™ä¼šè¯¯å¯¼ç”¨æˆ·ã€‚
*   **å»ºè®®**: é»˜è®¤é…ç½®ä¸­ï¼Œç›´æ’­æ¨¡å¼ä¸‹çš„ `max_visits` åº”è¯¥è®¾ç½®å¾—æ¯”å¤ç›˜æ¨¡å¼æ›´ä½ï¼ˆä¾‹å¦‚ 200-500 visitsï¼‰ï¼Œä¼˜å…ˆä¿è¯è·Ÿä¸Šç›´æ’­é€Ÿåº¦ï¼Œè€Œä¸æ˜¯è¿½æ±‚æè‡´å‡†ç¡®ã€‚

#### 3. UX äº¤äº’ï¼šâ€œè¯•ä¸‹â€æ¨¡å¼çš„çŠ¶æ€åŒæ­¥
*   **é—®é¢˜**: ç”¨æˆ·ç‚¹å‡»â€œè¯•ä¸‹â€ (Try) åï¼Œä¼šä»ç›´æ’­æµåˆ†å‰å‡ºä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ã€‚
*   **é£é™©**: å½“ç”¨æˆ·åœ¨â€œè¯•ä¸‹â€æ—¶ï¼Œç›´æ’­æµä»åœ¨ç»§ç»­ã€‚å½“ç”¨æˆ·ç‚¹å‡»â€œè¿”å›ç›´æ’­â€æ—¶ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ
    *   å¦‚æœç›´æ¥è·³å›æœ€æ–°æ‰‹ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ„Ÿåˆ°çªå…€ï¼Œé”™è¿‡äº†ä¸­é—´çš„è¿›ç¨‹ã€‚
    *   å¦‚æœä¸ä»…è·³å›ï¼Œè¿˜è¦ä¿ç•™åˆšæ‰çš„â€œè¯•ä¸‹â€å›¾ä½œä¸ºå˜åŒ–å›¾ï¼Œé€»è¾‘ä¼šéå¸¸å¤æ‚ã€‚
*   **å»ºè®®**: MVP é˜¶æ®µç®€åŒ–å¤„ç†ï¼šç‚¹å‡»â€œè¿”å›ç›´æ’­â€ç›´æ¥æ¸…ç©ºå½“å‰åˆ†æ”¯ï¼Œå¼ºåˆ¶åŒæ­¥åˆ°æœåŠ¡å™¨æœ€æ–°æ‰‹ã€‚

#### 4. æ³•å¾‹/ç‰ˆæƒé£é™©ï¼šè¯„è®ºä¸æ£‹è°±
*   **é—®é¢˜**: æ£‹è°±ï¼ˆSGF Movesï¼‰é€šå¸¸è¢«è§†ä¸ºäº‹å®æ•°æ®ï¼Œç‰ˆæƒé£é™©è¾ƒå°ã€‚ä½†**è§£è¯´è¯„è®º**ï¼ˆText Commentaryï¼‰æ˜¯å…·æœ‰ç‹¬åˆ›æ€§çš„æ–‡æœ¬ï¼Œå—ç‰ˆæƒä¿æŠ¤ã€‚
*   **é£é™©**: ç›´æ¥æŠ“å–å¹¶å±•ç¤ºæ˜Ÿé˜µæˆ–å¼ˆåŸçš„è§£è¯´æ–‡å­—ï¼Œå­˜åœ¨æ³•å¾‹ç°è‰²åœ°å¸¦ã€‚
*   **å»ºè®®**: ä»…ä½œä¸ºâ€œä¸ªäººå­¦ä¹ /ç ”ç©¶â€å·¥å…·ä½¿ç”¨å°šå¯ï¼Œå¦‚æœå‘å¸ƒä¸ºå•†ä¸šè½¯ä»¶æˆ–å¤§è§„æ¨¡æ¨å¹¿ï¼Œå»ºè®®é»˜è®¤å…³é—­è¯„è®ºæŠ“å–ï¼Œæˆ–ä»…æŠ“å–ä¸å«ç‰ˆæƒçš„çº¯æŠ€æœ¯ç»Ÿè®¡æ•°æ®ã€‚

#### 5. æ•°æ®æºç¼ºå¤±ï¼šèµ›äº‹é¢„å‘Š
*   **é—®é¢˜**: è§„åˆ’ä¸­æåˆ°çš„"èµ›äº‹é¢„å‘Š"ç›®å‰æ²¡æœ‰ç°æˆçš„ API (`Likely scraping weiqi.org`)ã€‚
*   **é£é™©**: ç½‘é¡µç»“æ„åŒ–æ•°æ®æŠ“å–ï¼ˆHTML Scrapingï¼‰æä¸ç¨³å®šã€‚ä¸€æ—¦å®˜ç½‘æ”¹ç‰ˆï¼Œè§£æä»£ç å°±ä¼šå¤±æ•ˆã€‚ä¸” `weiqi.org` çš„æ›´æ–°é¢‘ç‡å’Œå‡†ç¡®æ€§ä¸å¯æ§ã€‚
*   **å»ºè®®**: è¿™ä¸€å—å»ºè®®ä½œä¸º `Nice-to-have`ï¼Œæˆ–è€…è€ƒè™‘ç¡¬ç¼–ç ä¸€äº›å·²çŸ¥çš„ä¸–ç•Œå¤§èµ›æ—¥ç¨‹ï¼ˆå¦‚æœä¸éœ€é¢‘ç¹æ›´æ–°ï¼‰ï¼Œä¸è¦åœ¨è¿™ä¸ªåŠŸèƒ½ä¸ŠæŠ•å…¥è¿‡å¤šç²¾åŠ›å»å†™å¤æ‚çš„çˆ¬è™«ã€‚

---

## å®ç°æ›´æ–°æ—¥å¿—

## 2026-01-26: Phase 5 Bug ä¿®å¤ä¸å¢å¼º

### é—®é¢˜è¯Šæ–­

åœ¨æµ‹è¯• Phase 5 (KataGo æœ¬åœ°åˆ†æé›†æˆ) æ—¶å‘ç° `live_analysis` è¡¨æœ‰å¤§é‡ `status = 'failed'` çš„è®°å½•ï¼Œé”™è¯¯ä¿¡æ¯å‡ä¸º "Match data not found"ã€‚

**æ ¹æœ¬åŸå› åˆ†æ**:

```text
æ—¶é—´çº¿ï¼š
T1: _poll_live_matches() è°ƒç”¨ /situation API
    â†’ è·å– moves æ•°æ®ï¼Œä¿å­˜åˆ° live_matches.moves = ["Q16", "D4", ...]

T2: cron job åˆ›å»ºåˆ†æä»»åŠ¡
    â†’ live_analysis è¡¨æ’å…¥ pending è®°å½•

T3: _refresh_match_list() å®šæ—¶æ‰§è¡Œï¼Œè°ƒç”¨ /all å’Œ /history API
    â†’ è¿™äº› API ä¸è¿”å› moves æ•°æ®
    â†’ _persist_matches() â†’ get_or_create_match()
    â†’ ğŸ› BUG: db_match.moves = match.moves (ç”¨ [] è¦†ç›–äº†åŸæœ‰æ•°æ®)

T4: Analyzer._analysis_loop() å¤„ç†åˆ†æä»»åŠ¡
    â†’ è¯»å– live_matches.moves = []
    â†’ æ— æ³•é‡å»ºæ£‹ç›˜ä½ç½® â†’ æ ‡è®°ä¸º failed: "Match data not found"
```

### ä¿®å¤å†…å®¹

#### 1. é˜²æ­¢ç©º moves è¦†ç›–å·²æœ‰æ•°æ® (`analysis_repo.py`)

```python
# ä¿®å¤å‰ï¼šæ— æ¡ä»¶è¦†ç›–
db_match.moves = match.moves

# ä¿®å¤åï¼šåªæœ‰æ–°æ•°æ®æœ‰ moves æ—¶æ‰æ›´æ–°
if match.moves:
    db_match.moves = match.moves
```

#### 2. ä¸»åŠ¨è·å– moves æ•°æ® (`poller.py`)

ä¿®æ”¹ `_persist_matches()` é€»è¾‘ï¼š

```python
for match in matches:
    needs_moves = not match.moves or len(match.moves) == 0

    if needs_moves:
        # æ£€æŸ¥ DB ä¸­æ˜¯å¦å·²æœ‰ moves
        db_match = repo.get_match(match.id)
        if db_match and db_match.moves and len(db_match.moves) > 0:
            needs_moves = False

    if needs_moves and match.source.value == "xingzhen":
        # è°ƒç”¨ /situation/{id} è·å– moves
        situation = await self.xingzhen.get_situation(match.source_id)
        if situation and situation.get("moves"):
            match.moves = self.xingzhen._parse_moves_string(situation["moves"])
```

#### 3. æœåŠ¡é‡å¯æ—¶é‡ç½® stale running ä»»åŠ¡ (`analyzer.py`)

```python
async def start(self) -> None:
    # Reset any stale "running" tasks to "pending" (from previous crash/restart)
    self._reset_stale_running_tasks()
    ...

def _reset_stale_running_tasks(self) -> None:
    """Reset any tasks stuck in 'running' state back to 'pending'."""
    updated = db.query(LiveAnalysisDB).filter(
        LiveAnalysisDB.status == "running"
    ).update({
        LiveAnalysisDB.status: "pending"
    })
    if updated > 0:
        logger.info(f"Reset {updated} stale 'running' tasks to 'pending'")
```

#### 4. æ–°å¢ KataGo ç»Ÿè®¡å­—æ®µ (`models_db.py`)

ä¸º `live_matches` è¡¨æ·»åŠ æœ¬åœ° KataGo åˆ†æç»“æœå­—æ®µï¼š

```python
class LiveMatchDB(Base):
    ...
    current_winrate = Column(Float, default=0.5)  # From XingZhen API
    current_score = Column(Float, default=0.0)    # From XingZhen API
    katago_winrate = Column(Float, nullable=True)  # From local KataGo (latest move)
    katago_score = Column(Float, nullable=True)    # From local KataGo (latest move)
```

**æ•°æ®æ›´æ–°æ—¶æœº**: å½“åˆ†ææœ€æ–°ä¸€æ‰‹å®Œæˆæ—¶ï¼Œè‡ªåŠ¨æ›´æ–° `katago_winrate` å’Œ `katago_score`ã€‚

#### 5. æ–°å¢æ¢å¤ API ç«¯ç‚¹ (`live.py`)

| ç«¯ç‚¹                     | æ–¹æ³•   | è¯´æ˜                              |
| ------------------------ | ------ | --------------------------------- |
| `/matches/{id}/recover`  | POST   | æ‰‹åŠ¨æ¢å¤å•ä¸ªæ¯”èµ›çš„ moves æ•°æ®     |
| `/admin/stats`           | GET    | è·å–åˆ†æé˜Ÿåˆ—ç»Ÿè®¡                  |
| `/admin/recover-all`     | POST   | æ‰¹é‡æ¢å¤æ‰€æœ‰ç¼ºå¤± moves çš„æ¯”èµ›     |

### è½®è¯¢ç­–ç•¥æ¾„æ¸…

| æ¯”èµ›çŠ¶æ€                 | è½®è¯¢ API            | é¢‘ç‡          | ç›®çš„                 |
| ------------------------ | ------------------- | ------------- | -------------------- |
| `live` (ç›´æ’­ä¸­)          | `/situation/{id}`   | æ¯ **3 ç§’**   | æ£€æµ‹æ–°ç€æ³•           |
| `finished` (å·²å®Œèµ›)      | ä¸è½®è¯¢              | -             | moves å·²ä¿å­˜åˆ° DB    |
| æ¯”èµ›åˆ—è¡¨                 | `/all` + `/history` | æ¯ **60 ç§’**  | æ›´æ–°æ¯”èµ›åˆ—è¡¨å…ƒæ•°æ®   |

### æ•°æ®åº“è¿ç§»

```sql
ALTER TABLE live_matches ADD COLUMN IF NOT EXISTS katago_winrate FLOAT;
ALTER TABLE live_matches ADD COLUMN IF NOT EXISTS katago_score FLOAT;
```

### å—å½±å“æ–‡ä»¶

| æ–‡ä»¶                                    | æ”¹åŠ¨ç±»å‹                                      |
| --------------------------------------- | --------------------------------------------- |
| `katrain/web/core/models_db.py`         | æ–°å¢ `katago_winrate`, `katago_score` å­—æ®µ    |
| `katrain/web/live/models.py`            | LiveMatch æ¨¡å‹æ·»åŠ å¯¹åº”å­—æ®µ                    |
| `katrain/web/live/analysis_repo.py`     | é˜²æ­¢ç©ºè¦†ç›– + æ–°å¢ `update_katago_stats()`     |
| `katrain/web/live/poller.py`            | `_persist_matches()` ä¸»åŠ¨è·å– moves           |
| `katrain/web/live/analyzer.py`          | å¯åŠ¨æ—¶é‡ç½® running ä»»åŠ¡ + æ›´æ–° KataGo ç»Ÿè®¡    |
| `katrain/web/live/service.py`           | ç®€åŒ– cron job é€»è¾‘                            |
| `katrain/web/api/v1/endpoints/live.py`  | æ–°å¢æ¢å¤ API ç«¯ç‚¹                             |

---

## 2026-01-26: Phase 6 PV æ¨æ¼”æ˜¾ç¤º

### å®ç°å†…å®¹

å®ç°äº†æ‚¬åœ AI æ¨èç€æ³•æ—¶åœ¨æ£‹ç›˜ä¸Šæ˜¾ç¤ºé¢„æµ‹å˜åŒ–å›¾ (Principal Variation) çš„åŠŸèƒ½ã€‚

### åŠŸèƒ½ç‰¹æ€§

1. **åŠé€æ˜æ£‹å­**: PV æ£‹å­ä»¥ 60% é€æ˜åº¦æ˜¾ç¤ºï¼Œä¸å®é™…æ£‹å­åŒºåˆ†
2. **åºå·æ ‡ç­¾**: æ¯ä¸ª PV æ£‹å­ä¸Šæ˜¾ç¤ºåºå· (1, 2, 3...)ï¼Œè¡¨ç¤ºé¢„æµ‹é¡ºåº
3. **é¢œè‰²äº¤æ›¿**: é»‘ç™½æ£‹å­æ ¹æ®é¢„æµ‹é¡ºåºæ­£ç¡®äº¤æ›¿
4. **æ‚¬åœè§¦å‘**: é¼ æ ‡æ‚¬åœåœ¨ AI æ¨èåˆ—è¡¨é¡¹æ—¶æ˜¾ç¤ºï¼Œç§»å¼€æ—¶æ¶ˆå¤±
5. **å¤šå˜åŒ–åˆ‡æ¢**: æ‚¬åœä¸åŒæ¨èç€æ³•æ˜¾ç¤ºä¸åŒçš„ PV å˜åŒ–

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶                                                      | æ”¹åŠ¨ç±»å‹           |
| --------------------------------------------------------- | ------------------ |
| `katrain/web/ui/src/galaxy/components/live/LiveBoard.tsx` | æ–°å¢ PV æ¸²æŸ“åŠŸèƒ½   |
| `katrain/web/ui/src/galaxy/pages/live/LiveMatchPage.tsx`  | è¿æ¥ PV çŠ¶æ€åˆ°æ£‹ç›˜ |

### æ ¸å¿ƒä»£ç 

```typescript
// LiveBoard.tsx - æ–°å¢ drawPvStone å‡½æ•°
function drawPvStone(ctx, layout, x, y, boardSize, color, moveNumber, blackImg, whiteImg) {
  const { x: cx, y: cy } = gridToCanvas(layout, x, y, boardSize);
  const radius = layout.gridSize * 0.42;

  ctx.save();
  ctx.globalAlpha = 0.6; // åŠé€æ˜
  // ç»˜åˆ¶æ£‹å­å›¾ç‰‡æˆ–åœ†å½¢
  ctx.globalAlpha = 1.0;
  // ç»˜åˆ¶åºå·
  ctx.fillText(String(moveNumber), cx, cy);
  ctx.restore();
}

// æ¸²æŸ“ PV æ£‹å­ (åœ¨ useEffect ä¸­)
if (pvMoves && pvMoves.length > 0) {
  let pvPlayer = lastPlayer === 'B' ? 'W' : 'B';
  for (let i = 0; i < pvMoves.length; i++) {
    const coords = parseMove(pvMoves[i]);
    if (coords && !board[y][x]) {
      drawPvStone(ctx, layout, x, y, boardSize, pvPlayer, i + 1, blackImg, whiteImg);
    }
    pvPlayer = pvPlayer === 'B' ? 'W' : 'B';
  }
}
```

### æµ‹è¯•éªŒè¯

ä½¿ç”¨ Playwright MCP è¿›è¡Œå‰ç«¯æµ‹è¯•ï¼š

1. âœ… æ£‹ç›˜åˆå§‹çŠ¶æ€æ—  PV æ˜¾ç¤º
2. âœ… æ‚¬åœ Q8 æ¨èæ—¶æ˜¾ç¤ºå¯¹åº” PV (å¤šä¸ªåŠé€æ˜æ£‹å­å¸¦åºå·)
3. âœ… æ‚¬åœ P7 æ¨èæ—¶æ˜¾ç¤ºä¸åŒçš„ PV å˜åŒ–
4. âœ… PV æ£‹å­ä»…æ˜¾ç¤ºåœ¨ç©ºä½ï¼Œä¸è¦†ç›–å®é™…æ£‹å­

---

## 2026-01-26: æ£‹ç›˜ AI é€‰ç‚¹æ ‡è®°ä¸åŠŸèƒ½æŒ‰é’®

### åŠŸèƒ½éœ€æ±‚

å‚è€ƒæ˜Ÿé˜µå›´æ£‹çš„ UI è®¾è®¡ï¼Œåœ¨æ£‹ç›˜ä¸Šç›´æ¥æ˜¾ç¤º AI æ¨èçš„é€‰ç‚¹ä½ç½®ï¼ˆå½©è‰²åœ†åœˆï¼‰ï¼Œå¹¶æä¾›åŠŸèƒ½æŒ‰é’®æ§åˆ¶æ˜¾ç¤º/éšè—ã€‚

### å…·ä½“å®ç°

#### 1. æ£‹ç›˜ AI é€‰ç‚¹æ ‡è®°

åœ¨æ£‹ç›˜ç©ºä½ä¸Šæ˜¾ç¤º AI Top N æ¨èç€æ³•çš„ä½ç½®æ ‡è®°ï¼š

- **æ˜¾ç¤ºæ ·å¼**: ç»¿è‰²åœ†åœˆï¼Œé€æ˜åº¦æ ¹æ®æ’åé€’å‡
- **æ’åæ˜¾ç¤º**: åœ†åœˆå†…æ˜¾ç¤ºåºå· (1, 2, 3...)
- **é¢œè‰²æ¸å˜**:
  - Rank 1: 85% ä¸é€æ˜åº¦ (æœ€äº®)
  - Rank 2: 65% ä¸é€æ˜åº¦
  - Rank 3: 50% ä¸é€æ˜åº¦
  - Rank 4+: 40% ä¸é€æ˜åº¦
- **ä¸ PV äº’æ–¥**: æ‚¬åœ PV æ—¶éšè— AI é€‰ç‚¹æ ‡è®°

#### 2. åŠŸèƒ½æŒ‰é’®

åœ¨æ£‹ç›˜ä¸‹æ–¹æ·»åŠ åŠŸèƒ½æŒ‰é’®è¡Œï¼š

| æŒ‰é’®   | åŠŸèƒ½                         | çŠ¶æ€      |
| ------ | ---------------------------- | --------- |
| AIé€‰ç‚¹ | åˆ‡æ¢æ£‹ç›˜ä¸Š AI æ¨èæ ‡è®°çš„æ˜¾éš | âœ… å·²å®ç° |
| è¯•ä¸‹   | è¿›å…¥è¯•ä¸‹æ¨¡å¼                 | âœ… å·²å®ç° |
| é¢†åœ°   | æ˜¾ç¤ºé¢†åœ°ä¼°ç®—                 | âœ… å·²å®ç° |
| æ‰‹æ•°   | æ˜¾ç¤º/éšè—æ‰‹æ•°æ ‡è®°            | âœ… å·²å®ç° |

### ä¿®æ”¹æ–‡ä»¶ (AI é€‰ç‚¹åŠŸèƒ½)

| æ–‡ä»¶                                                      | æ”¹åŠ¨ç±»å‹                 |
| --------------------------------------------------------- | ------------------------ |
| `katrain/web/ui/src/galaxy/components/live/LiveBoard.tsx` | æ–°å¢ AI é€‰ç‚¹æ ‡è®°ç»˜åˆ¶åŠŸèƒ½ |
| `katrain/web/ui/src/galaxy/pages/live/LiveMatchPage.tsx`  | æ–°å¢åŠŸèƒ½æŒ‰é’® + çŠ¶æ€æ§åˆ¶  |

### æ ¸å¿ƒä»£ç  (AI é€‰ç‚¹)

```typescript
// LiveBoard.tsx - AI é€‰ç‚¹æ ‡è®°é¢œè‰²
const AI_MARKER_COLORS = [
  'rgba(76, 175, 80, 0.85)',   // rank 1 - bright green
  'rgba(76, 175, 80, 0.65)',   // rank 2
  'rgba(76, 175, 80, 0.50)',   // rank 3
  'rgba(76, 175, 80, 0.40)',   // rank 4+
];

// ç»˜åˆ¶ AI é€‰ç‚¹æ ‡è®°
function drawAiMoveMarker(ctx, layout, x, y, boardSize, rank) {
  const { x: cx, y: cy } = gridToCanvas(layout, x, y, boardSize);
  const radius = layout.gridSize * 0.35;

  ctx.beginPath();
  ctx.arc(cx, cy, radius, 0, Math.PI * 2);
  ctx.fillStyle = AI_MARKER_COLORS[Math.min(rank - 1, 3)];
  ctx.fill();
  ctx.fillText(String(rank), cx, cy); // æ˜¾ç¤ºåºå·
}
```

---

## 2026-01-26: è¯„è®ºåŒºæš‚æ—¶éšè—

### é—®é¢˜

è¯„è®ºåŒº (`CommentSection`) ç»„ä»¶å ç”¨è¿‡å¤šç©ºé—´ï¼Œé®æŒ¡äº†èƒœç‡èµ°åŠ¿å›¾ (`TrendChart`) ç­‰é‡è¦åˆ†ææ¨¡å—ã€‚

### è§£å†³æ–¹æ¡ˆ

æš‚æ—¶éšè—è¯„è®ºåŒºï¼Œå°†å…¶ä½œä¸º Phase 7 å¾…å®Œå–„åŠŸèƒ½ã€‚è¯„è®ºç³»ç»Ÿéœ€è¦é‡æ–°è®¾è®¡å¸ƒå±€åå†å¯ç”¨ã€‚

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶                                                     | æ”¹åŠ¨ç±»å‹                        |
| -------------------------------------------------------- | ------------------------------- |
| `katrain/web/ui/src/galaxy/pages/live/LiveMatchPage.tsx` | æ³¨é‡Šæ‰ CommentSection ç»„ä»¶è°ƒç”¨  |

### åç»­è®¡åˆ’

Phase 7 é‡æ–°è®¾è®¡è¯„è®ºåŒºå¸ƒå±€æ—¶è€ƒè™‘ï¼š

1. å¯æŠ˜å çš„è¯„è®ºé¢æ¿
2. æ‚¬æµ®å¼è¯„è®ºçª—å£
3. æˆ–å°†è¯„è®ºæ”¾åœ¨å•ç‹¬çš„ Tab é¡µé¢

---

## 2026-01-26: ä¸€çº§é¡µé¢ Bug ä¿®å¤

### é—®é¢˜ 1: åˆ‡æ¢æ¯”èµ›æ—¶æ‰‹æ•°æ˜¾ç¤ºé”™è¯¯

**ç°è±¡**: ä»ç¬¬ä¸€åœºæ¯”èµ› (290æ‰‹) åˆ‡æ¢åˆ°ç¬¬äºŒåœºæ¯”èµ› (254æ‰‹) æ—¶ï¼Œæ˜¾ç¤º "290 / 254 æ‰‹"ã€‚

**æ ¹æœ¬åŸå› **: `useLiveMatch` hook åœ¨ `matchId` å˜åŒ–æ—¶æ²¡æœ‰é‡ç½® `currentMove` çŠ¶æ€ã€‚æ—§çš„ `currentMove` å€¼ (290) ä¿ç•™ä¸‹æ¥ï¼Œè€Œæ–°æ¯”èµ›åªæœ‰ 254 æ‰‹ã€‚

**ä¿®å¤**: åœ¨ `useLiveMatch.ts` ä¸­æ·»åŠ  effectï¼Œå½“ `matchId` å˜åŒ–æ—¶é‡ç½® `currentMove` ä¸º `null`ï¼š

```typescript
// Reset state when matchId changes
useEffect(() => {
  setCurrentMoveInternal(null);
  setAnalysis({});
}, [matchId]);
```

### é—®é¢˜ 2: æ’­æ”¾æ§åˆ¶æ å¸ƒå±€ä¼˜åŒ–

**ç°è±¡**: æ‰‹æ•°ä¿¡æ¯ ("290 / 254 æ‰‹") å•ç‹¬å ä¸€è¡Œï¼Œæµªè´¹å‚ç›´ç©ºé—´ã€‚

**ä¿®å¤**: å°†æ‰‹æ•°æ˜¾ç¤ºç§»åˆ°æ’­æ”¾æ§åˆ¶æŒ‰é’®çš„åŒä¸€è¡Œï¼š

```typescript
// PlaybackBar.tsx - æ‰‹æ•°ä¿¡æ¯ç°åœ¨ä¸æ§åˆ¶æŒ‰é’®åœ¨åŒä¸€è¡Œ
<Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 0.5 }}>
  {/* æ§åˆ¶æŒ‰é’® */}
  ...
  {/* æ‰‹æ•° - ä¸æ§åˆ¶æŒ‰é’®åŒè¡Œ */}
  <Typography variant="body2" color="text.secondary" sx={{ ml: 2, minWidth: 80 }}>
    {currentMove} / {totalMoves} æ‰‹
  </Typography>
</Box>
```

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶ | æ”¹åŠ¨ç±»å‹ |
| --- | --- |
| `katrain/web/ui/src/galaxy/hooks/live/useLiveMatch.ts` | åˆ‡æ¢æ¯”èµ›æ—¶é‡ç½® currentMove |
| `katrain/web/ui/src/galaxy/components/live/PlaybackBar.tsx` | æ‰‹æ•°æ˜¾ç¤ºç§»åˆ°æ§åˆ¶æŒ‰é’®åŒè¡Œ |

### éªŒè¯

ä½¿ç”¨ Playwright MCP éªŒè¯ï¼š
1. âœ… ç¬¬ä¸€åœºæ¯”èµ›æ˜¾ç¤º "290 / 290 æ‰‹"
2. âœ… åˆ‡æ¢åˆ°ç¬¬äºŒåœºæ¯”èµ›åæ˜¾ç¤º "254 / 254 æ‰‹"
3. âœ… æ’­æ”¾æ§åˆ¶æ å¸ƒå±€ç´§å‡‘ï¼ŒèŠ‚çœå‚ç›´ç©ºé—´

---

## 2026-01-27: Phase 8 èµ›äº‹é¢„å‘Š

### å®ç°å†…å®¹

å®ç°äº†ä»å®˜æ–¹å›´æ£‹åä¼šç½‘ç«™çˆ¬å–å³å°†è¿›è¡Œçš„èµ›äº‹ä¿¡æ¯çš„åŠŸèƒ½ã€‚

### æ•°æ®æº

| æ¥æº | URL | å†…å®¹ |
| --- | --- | --- |
| éŸ©å›½æ£‹é™¢ | baduk.or.kr/record/schedule.asp | ëŒ€êµ­ì¼ì • (å¯¹å±€æ—¥ç¨‹) |
| æ—¥æœ¬æ£‹é™¢ | nihonkiin.or.jp/match/2week.html | å¯¾å±€äºˆå®š (å¯¹å±€é¢„å®š) |
| ä¸­å›½å›´æ£‹åä¼š | weiqi.org.cn / cwql.org.cn | èµ›äº‹æ—¥å† |

### æ¶æ„è®¾è®¡

```
UpcomingScraper (upcoming.py)
    â”œâ”€â”€ _fetch_korean()    â†’ éŸ©å›½æ£‹é™¢ HTML è§£æ
    â”œâ”€â”€ _fetch_japanese()  â†’ æ—¥æœ¬æ£‹é™¢ HTML è§£æ
    â””â”€â”€ _fetch_chinese()   â†’ ä¸­å›½å›´æ£‹åä¼š HTML è§£æ

LivePoller
    â””â”€â”€ _upcoming_poll_loop()  â†’ æ¯ 2 å°æ—¶æ‰§è¡Œä¸€æ¬¡
        â””â”€â”€ _refresh_upcoming()
            â””â”€â”€ scraper.fetch_all()
                â””â”€â”€ cache.set_upcoming()
```

### è½®è¯¢ç­–ç•¥

| ä»»åŠ¡ | é¢‘ç‡ | è¯´æ˜ |
| --- | --- | --- |
| èµ›äº‹é¢„å‘Š | æ¯ 2 å°æ—¶ | å®˜æ–¹èµ›ç¨‹å˜åŒ–ä¸é¢‘ç¹ |
| æ¯”èµ›åˆ—è¡¨ | æ¯ 60 ç§’ | æ£€æµ‹æ–°æ¯”èµ› |
| ç›´æ’­ç€æ³• | æ¯ 3 ç§’ | æ£€æµ‹æ–°ç€æ³• |

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
| --- | --- |
| `katrain/web/live/clients/upcoming.py` | èµ›äº‹é¢„å‘Šçˆ¬è™« |
| `katrain/web/ui/src/galaxy/components/live/UpcomingList.tsx` | å‰ç«¯ç»„ä»¶ |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶ | æ”¹åŠ¨ |
| --- | --- |
| `requirements-web.txt` | æ–°å¢ beautifulsoup4, lxml |
| `katrain/web/live/poller.py` | æ–°å¢ _upcoming_poll_loop |
| `katrain/web/ui/src/galaxy/pages/live/LivePage.tsx` | ä½¿ç”¨ UpcomingList |

### å‰ç«¯æ˜¾ç¤º

- æŒ‰æ—¥æœŸæ’åºæ˜¾ç¤ºå³å°†è¿›è¡Œçš„èµ›äº‹
- æ˜¾ç¤º"ä»Šå¤©"ã€"æ˜å¤©"ã€"Nå¤©å"ç­‰å‹å¥½æ ‡ç­¾
- æä¾›å®˜æ–¹ç½‘ç«™é“¾æ¥æ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹è¯¦æƒ…
- è‡ªåŠ¨æ¯ 30 åˆ†é’Ÿåˆ·æ–°

### æ³¨æ„äº‹é¡¹

ç”±äºæ˜¯ HTML çˆ¬è™«è€Œéå®˜æ–¹ APIï¼Œå­˜åœ¨ä»¥ä¸‹é£é™©ï¼š

1. **ç½‘ç«™æ”¹ç‰ˆ**: å®˜ç½‘ HTML ç»“æ„å˜åŒ–ä¼šå¯¼è‡´è§£æå¤±è´¥
2. **åçˆ¬é™åˆ¶**: è¯·æ±‚é¢‘ç‡è¿‡é«˜å¯èƒ½è¢«å°ç¦
3. **æ•°æ®å‡†ç¡®æ€§**: é¡µé¢ä¿¡æ¯å¯èƒ½ä¸å®Œæ•´æˆ–å»¶è¿Ÿ

å»ºè®®ï¼š
- ä¿æŒè¾ƒä½çš„çˆ¬å–é¢‘ç‡ (2å°æ—¶)
- åšå¥½é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- å®šæœŸæ£€æŸ¥çˆ¬è™«æ˜¯å¦æ­£å¸¸å·¥ä½œ
